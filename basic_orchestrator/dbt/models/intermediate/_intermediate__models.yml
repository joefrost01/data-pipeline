version: 2

models:
  - name: int_org_current
    description: |
      Current organisation combinations derived from events.
      Used to populate dim_org via SCD2 merge.
      
      Business key: legal_entity|division|desk|book
    
    columns:
      - name: org_bk
        description: Pipe-delimited business key
      - name: org_sk
        description: Hash-based surrogate key
      - name: legal_entity
        description: Legal entity (defaulted to Commercial Markets)
      - name: division
        description: Division (derived from desk)
      - name: desk
        description: Trading desk
      - name: book
        description: Trading book
      - name: effective_ts
        description: First time this combination was seen
  
  - name: int_trader_current
    description: |
      Current traders derived from events.
      Used to populate dim_trader via SCD2 merge.
      
      Business key: trader_id
    
    columns:
      - name: trader_bk
        description: Trader ID as business key
      - name: trader_sk
        description: Hash-based surrogate key
      - name: trader_id
        description: Trader identifier
      - name: trader_name
        description: Trader name (null - no reference data)
      - name: trader_type
        description: Trader type (defaulted to HUMAN)
      - name: effective_ts
        description: First time this trader was seen
  
  - name: int_account_current
    description: |
      Current accounts derived from events.
      Used to populate dim_account via SCD2 merge.
      
      Business key: account_id
    
    columns:
      - name: account_bk
        description: Account ID as business key
      - name: account_sk
        description: Hash-based surrogate key
      - name: account_id
        description: Account identifier
      - name: effective_ts
        description: First time this account was seen
  
  - name: int_instrument_current
    description: |
      Current instruments derived from events.
      Used to populate dim_instrument via SCD2 merge.
      
      Business key: exchange:symbol:contract_month
    
    columns:
      - name: instrument_bk
        description: Colon-delimited business key
      - name: instrument_sk
        description: Hash-based surrogate key
      - name: instrument_id
        description: Composite instrument identifier
      - name: symbol
        description: Instrument symbol
      - name: exchange
        description: Exchange code
      - name: product_type
        description: Product type
      - name: contract_month
        description: Contract month (YYYYMM)
      - name: currency
        description: Currency code
      - name: multiplier
        description: Contract multiplier
      - name: tick_size
        description: Minimum price increment
      - name: effective_ts
        description: First time this instrument was seen
